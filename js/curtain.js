const isMobile=/Mobile/.test(navigator.userAgent),curtainDiv=document.getElementById("curtain"),button=document.getElementById("curtain-toggle"),openLabel=document.getElementById("open"),closeLabel=document.getElementById("close"),track=document.getElementById("artwork-track"),artworks=document.querySelectorAll(".artwork");let autoMove=!1,direction=-2;const INITIAL_ANIMATION_DURATION=1200;document.addEventListener("DOMContentLoaded",()=>{let t=100;track.style.transform=`translateX(${t}%)`,document.body.style.overflowY="auto",document.body.style.overflowX="hidden"});const toggleCurtain=()=>{isMobile||("true"===curtainDiv.dataset.toggled?(track.animate({transform:"translateX(100%)"},{duration:600,fill:"forwards"}).addEventListener("finish",()=>{curtainDiv.dataset.toggled="false",button.setAttribute("aria-expanded","false"),openLabel.style.display="block",closeLabel.style.display="none",button.animate({top:"17.5vh"},{duration:600,easing:"ease-in-out",fill:"forwards"})}),artworks.forEach(t=>{t.animate({objectPosition:"100% center"},{duration:600,fill:"forwards"})})):(track.animate({transform:"translateX(2.5%)"},{duration:1200,fill:"forwards"}),artworks.forEach(t=>{t.animate({objectPosition:"100% center"},{duration:1200,fill:"forwards"})}),curtainDiv.dataset.toggled="true",button.setAttribute("aria-expanded","true"),openLabel.style.display="none",closeLabel.style.display="block",button.animate({top:"87.5vh"},{duration:600,easing:"ease-in-out",fill:"forwards"})))},handleOnDown=t=>{t.touches?track.dataset.mouseDownAt=t.touches[0].clientX:track.dataset.mouseDownAt=t.clientX,autoMove=!1},handleOnUp=()=>{track.dataset.mouseDownAt="0",track.dataset.prevPercentage=track.dataset.percentage,autoMove=!0,setInterval(animateAutoMove,1200)},handleOnMove=t=>{if("false"===curtainDiv.dataset.toggled||"0"===track.dataset.mouseDownAt)return;let e,a=-((parseFloat(track.dataset.mouseDownAt)-(t.touches?t.touches[0].clientX:t.clientX))/window.innerWidth*100),n=Math.max(Math.min(parseFloat(track.dataset.prevPercentage)+a,2.5),-70);track.dataset.percentage=n,track.animate({transform:`translateX(${n}%)`},{duration:1200,fill:"forwards"}),artworks.forEach(t=>{t.animate({objectPosition:`${100+n}% center`},{duration:1200,fill:"forwards"})})},animateAutoMove=()=>{if(!autoMove||"false"===curtainDiv.dataset.toggled)return;let t=parseFloat(track.dataset.percentage);console.log(t),direction=-70===t?1.5:2.5===t?-1.5:direction;let e=t+direction;track.dataset.percentage=Math.max(Math.min(e,2.5),-70),track.animate({transform:`translateX(${e}%)`},{duration:1200,fill:"forwards"}),artworks.forEach(t=>{t.animate({objectPosition:`${100+e}% center`},{duration:1200,fill:"forwards"})})};document.body.addEventListener("mousedown",handleOnDown),document.body.addEventListener("touchstart",handleOnDown),document.body.addEventListener("mouseup",handleOnUp),document.body.addEventListener("touchend",handleOnUp),document.body.addEventListener("mousemove",handleOnMove),document.body.addEventListener("touchmove",handleOnMove);